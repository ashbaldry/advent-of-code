{
  "hash": "920056fcc7c07113090cfd09196022f4",
  "result": {
    "markdown": "---\ntitle: \"2021 - Day 20\"\nformat:\n  html:\n    code-fold: show\n    code-tools: true\n    code-block-bg: true\n    code-block-border-left: \"#AB63BD\"\n---\n\n\n## Set-Up\n\n\n::: {.cell}\n\n```{.r .cell-code}\nalgorithm <- scan(\"input.txt\", n = 1, sep = \"\", what = character())\nalgorithm <- ifelse(strsplit(algorithm, \"\")[[1]] == \"#\", 1, 0)\nstr(algorithm)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n num [1:512] 1 1 0 1 1 0 1 0 1 1 ...\n```\n:::\n\n```{.r .cell-code}\nimage <- readLines(\"input.txt\")[-1:-2]\nimage <- do.call(rbind, lapply(strsplit(image, \"\"), \\(x) ifelse(x == \"#\", 1, 0)))\nstr(image)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n num [1:100, 1:100] 0 0 0 0 1 1 0 0 0 1 ...\n```\n:::\n:::\n\n\n### Helper Function\n\n\n::: {.cell}\n\n```{.r .cell-code}\nenhanceImage <- function(image, void = 0) {\n  # Padding\n  image_pad <- cbind(void, void, rbind(void, void, image, void, void), void, void)\n  new_image <- matrix(0, nrow(image_pad), ncol(image_pad))\n\n  inner_box <- 2:(ncol(image_pad) - 1)\n\n  for (i in inner_box) {\n    for (j in inner_box) {\n      bin_number <- paste0(t(image_pad[(i - 1):(i + 1), (j - 1):(j + 1)]), collapse = \"\")\n      new_image[i, j] <- algorithm[strtoi(bin_number, 2L) + 1]\n    }\n  }\n  new_image[inner_box, inner_box]\n}\n```\n:::\n\n\n## Part 1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nimage1 <- enhanceImage(image, 0)\nimage2 <- enhanceImage(image1, image1[1, 1])\nsum(image2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 5391\n```\n:::\n\n```{.r .cell-code}\nfor (i in seq(nrow(image2))) cat(ifelse(image2[i, ], \"#\", \".\"), \"\\n\", sep = \"\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n....##.....##...#..#......##...##.###..#......##..##...#...##..##...##..##.........#..........###.#..##.\n....##..##..###.#..#####.####...#..###.##.##..###..###.##...####.####.########.####.#....##...##..#####.\n...#....##.#..#####...##.#.###.###.###.###.#..###.#..#.####.###..##..#.###.#.#..#.#####...####..#..#.###\n..#......###..#..#.......###.###.#...#.#.#....##...###...##.#....###..###.###...#..#..####.##.#..#.#.###\n.#..##..#.######..#######.##..#.....##.###..#.#......#...#..#..###...###..#....#.....####.#.....#.###..#\n.#.###.###.#####.....#.#.#.......#..#.#.##...##.#.#.####...#...##...#####.###.#.#.#...####..#.##.....##.\n.####.#..#.#.#..#...###.#.#.###..#....#....#.#...#.##...###..########...####.###.#.#######.#..#.###.##..\n.#..#.##.#...#.#..#.######..##..#..#..#..#.#.###........#....#.##..#.########..#..##.#.#.#..#..#####.#.#\n.##.#.#..######..#.#..#...#...#.#.###.#.#..#.###..#####....###..#.....##.##..#.#.#.####..#.#######..#.##\n.##..#..#.#..###.#####.#..#..#...###.##..###.#..##.#.#...##..#....#..##..#..#.....###...######..##.#.#..\n....#.####...#...##.#.##..##.#.###.#....########....###...##...#.##.#...#.#.##.#.#####.#.#..##.####...#.\n.....##.#.#..####.#..####..##..##..##.#.#....###...#.#..#.#.#.####...###.##....#.#.##...#.##..##..#..###\n.##.###..##..#.#.##.##......#.###.###.....###...#......####..##.###.##....###..#.##..#...##....#.#...###\n##.#.##...#.##.##.......#.#..#..###..##.#.#..##..##...####......##.##.#.#..#.####.###..#...#...#..##.##.\n#.####...###.##.#...#...###.#####..##..#...###...#.#.#...#....#..#..#.##...#.#####.##..#..#...#..##.#...\n...#.###....###.##..#..#..##......#...##..######...##..#..####.#.#.##.###.#.#....##.#...###.#.#.##..####\n##...###...#.#....#.######..#.##.#..##.#..##.#..#..#.#..#.#.#...##....####...###...####.#...#..####.####\n#..###.#...####.#.#...#.####.#.##.###.....##..#..###.#.###.#.#....####..##.##.##..##...##..#.##..#...##.\n#.###.###.#.##.##.###.#.##...##.#.###.#..#####.###...#....###.####.###.#####.#.......#.#.#.#...###.#.#..\n#.#..#.#####..#..#...#.#.#####.###..#.#..#.##..####.##...#..##..#.##..#####.#..##.#..#..##.#.#....#.##.#\n..###....#...#...#.###...###.#.#.#.##..##...#.#####.#.###..#...##.#..#....#.#....##.##.##.#.#.###.#####.\n..#.#.#...#..##.#.#..####.#...#.#.###.#####.##.##.##..###..######...#.###.....#....#.###..#....####..###\n..##....#...#..###.###.#.#.....####...###....###.#.#####.###....#..#.###.###..#.##.##.#...#....##.###...\n.###.....#.#.....#....###.##.#....###..##..####.#..#.#...#...##.#...#...##...#...#..#.##.#...#.##..#....\n.#..#.#.#..#.##...###.#...#..##.##....#.#.....###..####..#...##......##.###..#..##..#..###.#..##..##...#\n..######...#.....#.#....#.##.##..#..#.######.##...##.#..#....#.#...####.####...#.#.#.##...#.##.#.###.#..\n.###.#.#.#..#....##.#.##..#.##.#.#.##...##..#.#.######.##.#.####..##...#.#.###.###..###.###...#.......#.\n###..#...#.#.#.#..#....##.#.###...###.#.#.#.#..#..#.#..##....#..########.#......#.##..#.#..#..#..#.#####\n#.##.#.#.#.#..####.###...##...#.#.#....###.#.#...##.#.#.#.#.##.##...##.......###..#.##.####.##.#..#..###\n.#.#.##...#..##..#####.##..#.###.#.#.#..#..###..#....##..##..#.....#..#....#.###.#........#.#..#.###..#.\n.###.###.#.#..##.###..#..#...#..#....##.#.#..#....###.##..##.#..#...####.#...#....##.......####...#..#..\n.#..##.#..####.#.#.#####...#..#...#.##....#....####.##.#.###.#.....#.##..#...##..##.#.#.......###...##.#\n...##..###.....#..###.#...##...###..###.#..#.##....#...###.#..###.............#...#.#####..##......##..#\n...#....##...##...##......#######..####..#..#########.###.#...#.#...#.##....##.#.#.##.....###.##..####.#\n###.#.###.#.#########....#.##.....##...##.#..#...#....##.####..###..##.###....#.####.#####..##...#...##.\n#.#..#..##.#.#..#.#####.#...##.###.#..#..#.###.#...#.#.#.######.#..#..####.##.####..##.#.##.#....#..###.\n...##..#..#...#.#..###....#..#.#.####......#.#.#..##..#.##.#.###.###....##.##...#.####.##.##.##.#.#####.\n...............#..#.#.#.#...##.#....#.#..####..#.###.##.###.##.##..###..####.#######.###..#.#####.#####.\n...#...##...#.#.#.#...##..#....#.##...#.#...#..##..#.#....##.###.#..####......#..#.#.#...#.###..#.#...#.\n.###.#.#...##...#.##...#.######.....#.#.#..##.#...#.###.##....#.##.#..#...#.#.#.#.###.##.##....#.######.\n..##..#..#.#.#.###..#...##.###.#..###..#.#.#..###..###.##..###.##..#####..###.###.#.#####....##..#.##..#\n#######.#.#.#.#..#....#....#.......#.##....#####.##....#.###.###...#..###...#####.#.....####.#.#..###.##\n###.#.#..#.#..#...####.##.##.#...###.#.##.#..#.##...#......#.######.####..#...#.#..##....##...####.#.#..\n.##.##..####.####..##.##..#..###.##.####..#.##....##.#..#..##.##.###...#...##..#.#..####..##.#..##.#####\n.##..#.#...#....####..#...######.##..#.####..#.#.##.#.##...#.#.#..##.#.##.###...#.##.....##..##.##......\n..####.###.#..#.#...#####.#####...##.#.###....##.####.##.#.###.#.#.###......####.#..##.....#..###...#...\n.##...#.#.#.#.#...#.#######.##.#..#.##.####..##.#.###.###.#..#.#.##..#..####..####.#.....#.###..#...#..#\n..####.....#.#.#.#.##.####..#........#.#..##.#.#...#.##...#...########........##.####..#.####....#...#..\n##....#..#.#.#..########.#.#...#.#.#####....#..#..###.##.#.#.#...###..###....##...##..##.#..##.##.###..#\n#....##.#..............#.##.##.#.#...#..##.##.#...#....#..#..#.##.##.#....###.#.##.##.####.#.#.#.....##.\n#...##.....#.#.######........#...#.##.##.....##.##.....##.#.#.####..#...####.###.#.##.##.##.##.#########\n###..##.#......#.#..##..###.....###.########..#.#.#.#.####...####..##.#####....###.#....#.###.######....\n##..###....##.#.##.......###..#.##..###.#...#..###.##...##.#..#..####.#...#.#..#..###.#.#....##........#\n#.#####.#.##.##..######.....#.##.#.....###...#...#####.###.##...#.####...##....##..#######.#.#.##.#.###.\n.#####.#..##.#..##.#.##...#..##.###..#####..##.##...#.#.####..##.#..##.##...###.###.####...#...#..###.#.\n.#.##.###..#.#.##.#########......#####..###...##...#.##.#####.#...#.##.....##.##...#.###..##.#.#####.###\n.#.#########.....#..............##....#.#...##..#...#.......#####....##..##.#.#..#...##.####..###...#..#\n.#..#.#..#...#....#...##.#.#.##.#.#.#.#.##.#..##.##.##..##.####....##.#.#.##....#..######...######.#....\n.#.#.#..####.###..#..####..##..#.##.#..##..#.#..#......#.#.##.#..#####.#.#.#.#.#...#.#.#...##.#.###.###.\n#..##.#....#.#...#..#####....#.##.#....#..##..##..#.#.###..#.####..##...#...#.#...###....##..#.##..##.#.\n#.####.#.#....#...####.#...##.##.#..##..########.#.####.##...###....##.#.##..####...##.....#.#....##.#..\n##########......##.#...#.##.###.#.#.#...######.###.###.##...##..##...#...###.###.#....###...#..###.###..\n#..#.#.#..##.#.###..##..##..#.###.#.....##..#.#.##..#...#..#.#.##..#.#.#..#.###.##.###...#...#....#.#...\n#..##.#..####..#..###.#..#..#..##.###.##.#..#..#..##.###...##..#######..#.###.#....#.###.##.#..#.#..##..\n#.###.....#..#.##.##.####.#.######...#.#..###.#######.#.......#.#...##..###.#..###.##.###..#.##..###.#..\n##...##.##.###.###..##.#.#.#.####.#.#.#.###....##.....##.#.#...#...##..##..#.###.#.#.##..#...###########\n###.###...##..##..#.##.####...###..#.#.##..####..#######..#.##..##.....#.##.###.#.#...#.#..#..###..#.###\n.#..###..#..#.###.##..#.#..#.#...#....###..#.##.#.##..##.###....##..#.##....#..#..##.#.#.#.###..#.......\n#....##.##..#..##...#...#.##..#.###.#...###.#.#####...###.####.#.#..##....###..###.##..##.###.#####...#.\n#.#....#.#.##.###.##....###..#..#..#..##..##..#..#....#.###...####.#.......#..##.#.##.#...##.#####.#.###\n#.###....#.#.#...#.#.#.#...#..####...#..#...#..##.#..####.#....###.##..###.#.#...#....#...#....###.....#\n#.#.#.#...#.#.####.....#....#..####.#.##......#.#..###.....####..##...#.##.#####.......#..#.#.####.####.\n..#.###...##....###.##.##.#...#.##.##.###.#.######.#####....######....#.##.#####.#..###.#####.##..#....#\n..#.##...#######..#..#..##..##...#....####.##.#.....###.#.###.##.#..####..##...#..##..#.#.#..###.#.#.#..\n..#.....#.##.#.###..#.##.#.##.#####.#...########.......##.#....#...#.#.##.###.####.#.#.#.####...##.#.###\n....#...#.#...#.#.##.#..#..#...########.##..#..#.#.#...#.#..######...#.##.###.#.#...#####.#########.####\n.####.#.#..#.#..#...#...#.##.#.......#..#..####.####.#.###.#.##..##.#..##.##.##....##...###.#..#.#..##..\n####.##...##..#####.###.###.#.#...#..#.####.#.#.#.##.....###.#.###.#.#..#.######..###..#...##.#.#.#.##..\n#.###.##...#..#.#...###...####.#.###.#.##....#..#.#.#...#.#..##.#.#.#.##..#.#.#....#######..#....#..#.##\n##.##.#.#........#....###.##.#.#..##.....##.#...#.####.#..#..#.##.#..#.....#.#...#.###.#..#.#..#...#.##.\n#..###.#.####..###..#.###.....##..#...#.##..#.######.#.#..##....###..###..###.###.#####......#...#.#####\n....#.#...###.##....##..#.#..#.##..#..#.##.##.#..###.#.#.#.#..#.#..##.#......###..#..###...#...####..#.#\n.############..#.##.##..#....##..#...##.#...##..#..#.####..#...##...#...#...##.##..#.###.####.#.#...#...\n.#..#.#...##.###...#.#..##.##.##.#..##.#.##.##.##.##.##..##..##.#...#.....####.###.#.#####.##.....#.##..\n.###.#..#..##.#..#..#....#.#...##..#.#.#..#..##...##..#.#.###.#.....#...#.....#.###.#.##....#.#.#.##.###\n.#.#..#.#.#.###....#...##.#.#..##.###..##.#.#.####.#######...###.##.##.......#.##...#.##.#...###.##.#.#.\n....#..#.###..##.#####.##.#..##....###.##..#.#.##.##..##..#..##.#.###.#..#.#...##...##....#####..#.#...#\n.#...#.#.##.#..#.####.#.#.##..##..##..#####..####......##.......###.##..#.#.#.#.#..###...#.#.#.##.#.####\n.###.#...##...###.#...##.###...#..#####.#.##.##.#.#.##.#.##...##.##.....###.#..#.#.#....##..##.#.#.##.##\n..####...###.#..#.##.#.###.#.##...#.#######..#..####..##.....###..#...##.###..#.#......#....#.#..#####..\n...##...#..#.##.#...##..##..#.#...######.#..##..#####....#...##...######......###.##.....##.#.#####...##\n............#..#..#..#..#..#.#.#..#.#...#.###..##..#..#.#.####...##..#.###...##.#..#..###...##.#.##.#..#\n.####.####.##.#..#...###.#.#.#.#....#.#.#.....##....##..#####.##..##.#..####..##.....#.#...##.#####..###\n.#.#.###..####..##.####...#.####.#..###.#.##..##.....#..#..##.#...###.##.#.#.###.#.####......#####....#.\n..#.##.#.##....#.....#.#.#...###....#.##.#.#...##.########.....#.#.#.#.#.#...######...######..##.#.####.\n..###.#...#.##.##.###.###..#...######...###.#....##########..#####..#####.#...#####....#..#.##.......#..\n...#.##..########.####..##...##..#.######.#.#####.##....#.#.###.##.#.##.##...####..##.###..###..##..#...\n.#..##...##.#...##....#.#.##.##...##..##.#.#.......##..#..#...####.....#.#.#.#.##.....#..#.####.#.#.###.\n#..#..#..#....#.###..#.#.#..#.######..#.###...#..##.#.###..##......#.##.#.#######..#.#....##..#.#......#\n#.##......#..##..#####....#.#.....#.##.##.##.#.......##.##..##..###.##.#.#.#...###.###.##.#..#.#.##..###\n###.##.##..##...#.####..#......#.#.#.#.###.#..##.#.#..###..#..##..#..##.##..#####..#...#.####..##...#..#\n#.####.#..##.#.#.#..#..####...#....##.##.###.####.##.#....####.###...#.....#.#####...##########.#..#.###\n..##..#..#.#.####..###..#.###..#.#.#.#..#.#.##..#..#.####...#.#.#.##.#.##.....##..###.###......#.#######\n..#.#...#.#....#.#.#.#.....#.#......#.#....#.#....#.#.#.#.............#.#.....#.##.#..#.#............#.#\n```\n:::\n:::\n\n\n## Part 2\n\n\n::: {.cell}\n\n```{.r .cell-code}\nimagex <- image\nfor (i in 1:50) imagex <- enhanceImage(imagex, imagex[1, 1])\nsum(imagex)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 16383\n```\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}